Reference: https://www.netspi.com/blog/technical/adversary-simulation/attacking-sql-server-clr-assemblies/

### What are?
Common Language Runtime (CLR) assembly as a .NET DLL (or group of DLLs) that can be imported into SQL Server.  
Once imported, the DLL methods can be linked to stored procedures and executed via TSQL.  
The ability to create and import custom CLR assemblies is a great way for developers to expand the native functionality of SQL Server, but naturally it also creates opportunities for attackers.

### How to find them(Example)?
```
SELECT [name]
      ,[principal_id]
      ,[assembly_id]
      ,[clr_name]
      ,[permission_set]
      ,[permission_set_desc]
      ,[is_visible]
      ,[create_date]
      ,[modify_date]
      ,[is_user_defined]
  FROM [WEB\CLIENTS].[clients].[sys].[assemblies]
GO
```

OR WITH PowerUPSQL
`Get-SQLStoredProcedureCLR -Verbose -Instance <DB> -Username <USER> -Password <PASS> | Format-Table -AutoSize`

### How to read it's content (Content is what you are looking for)?
```
SELECT [assembly_id]
      ,[name]
      ,[file_id]
      ,[content]
  FROM [WEB\CLIENTS].[clients].[sys].[assembly_files]
GO
```


### How to export into DLL(convert from hex)?
Easiest is to use PowerUPSQL:
`Get-SQLStoredProcedureCLR -Verbose -Instance <DB> -ExportFolder <PATH>  -Username <USER> -Password <PASS> | Format-Table -AutoSize`
OR
`Get-SQLServerLink -Instance <IP> -Username <USER> -Password <PASS> | Get-SQLAssemblyFile -ExportFolder <PATH>`
(Use this to dump the Assemblies_files aka CLR .dlls)
OR
Copy the content(hex) from the previous step and save it to a local file ex: `binary.hex`
Then convert it to Binary: `xxd -r -p binary.hex binary.dll`