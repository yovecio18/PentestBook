The second lab is a simple JS script that need to be patched and simulates a(secure coding) and it is a extension of the first lab where we are supposed to patch the vulns in the code and then send it thru /patch to obtain the flag...

1)Now on first check we are into a password generator that ask for **lenght(8-256 chars)** and type **(simple=alphabet, complex=alfanumeric,symbols)** and here it generates the password.

2)Let's start by checking the basic functionalities...
```
┌──(root㉿kali-bello)-[/home/millycash/Downloads/skills_assessment_patching]
└─# node pwgen.js 16 simple
simple password - length 16: hbchjbymzqjklljp
                                                                                                                                                                                                                                                                                                                              
┌──(root㉿kali-bello)-[/home/millycash/Downloads/skills_assessment_patching]
└─# node pwgen.js 16 complex
complex password - length 16: Mq4$I%wS88d3i%30
```


3)Now sending a base code and enabling the tips it start by suggesting us to sanitize the length/type arguments and we cad do by:
```
//Checking that args are not undefined
if (length === undefined || type === undefined) {
  console.log("usage: node pwgen.js <length> <type>");
  console.log("length: integer between 8 and 128");
  console.log("type: simple or complex");
}
else{
  //Sanitize args
  var type = type.replace(/[!@#$%^&*();]/g, "");
  var length = length.replace(/[!@#$%^&*();]/g, "");
}
```


4)Next it suggest us to thrown an error if lenght isn't an integer between 8/128 so I added a new function that gives back boolean and edited the try catch to match my errors
```
//Checking the integer is a number
function integerCheck(length) {
  var bool = Boolean(isNaN(length));
  return bool;
}
```

5)Next we get the same thing on the type that must be simple or complex so we can do the same thing

```
//Checking that type is the specified type
function typeCheck(type) {
  var bool = Boolean(false);
  if  (type != "simple" && type != "complex")
  {
    bool = false;
  } 
  else{
    bool = true;
  }
  return bool;
}
```


6)Now we have to do the try/catch to execute the code that takes together the (length=must be an integer between 8 128) and (type=must be simple/complex)

8)But this was still failing so I parsed the code in snyk and it showed that the new function in password generate might still be insecure
```
  new Function(
    `console.log("${type} password - length ${length}: ${password}")`
  )();
```

And i fixed by just doing a normal Function with:
```
  console.log("%s password - length %s: %s", type, length, password);
```
